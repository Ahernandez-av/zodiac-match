<h1>Details</h1>
<p id="room_id" style="display: none;">{{_id}}</p>
<p id="room_user" style="display: none;">{{username}}</p>

<ul id="messages"></ul>
<form id="chat" action="">
  <input id="m" autocomplete="off" /><button>Send</button>
</form>

<script src="/socket.io/socket.io.js"></script>
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script>

  $(function () {
    let room = document.querySelector('#room_id').innerHTML
    console.log(room)
    var socket = io();


    // call the server-side function 'adduser' and send one parameter (value of prompt)
    socket.emit('room', room);

    $('form').submit(function (e) {
      e.preventDefault(); // prevents page reloading
      socket.emit('chat message', $('#m').val());
      $('#m').val('');
      return false;
    });
    socket.on('chat message', function (msg) {
      $('#messages').append($('<li>').text(msg));
    });
  });

</script>